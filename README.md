# <img src="matterbridge.svg" alt="Matterbridge Logo" width="64px" height="64px">&nbsp;&nbsp;&nbsp;matterbridge-daikin-device

[Matterbridge](https://github.com/Luligu/matterbridge)でダイキンのデバイスをMatterで接続できるようにするためのプラグインです。

このプラグインはdsiotフォーマットでローカル通信を行えるダイキンデバイスを対象としています。

## 初期設定

プラグインのConfigurationの `daikinIPs`
でデバイスのIPを追加し、Matterbridgeを再起動してください。

## 動作確認済みデバイス

### エアコン

- AN22ZRS

### 空気清浄機

- ACK70Z

## 動作割り当て

デバイスが持つ機能に対してMatterが定義する動作モードが不足しているため、いくつかの機能は無理やり割り当てています。

### AN22ZRS

- エアコン システムモード: 運転モード

| Matterモード | エアコン運転モード |
| ------------ | ------------------ |
| Off          | 電源OFF            |
| Auto         | 自動               |
| Cool         | 冷房               |
| Heat         | 暖房               |
| FanOnly      | 送風               |

設定できない運転モード(除湿/加湿)は `mode`
モードセレクトクラスターでのみ設定可能

- エアコン ファンコントロール: 風量

| Matter風量 | エアコン風量 |
| ---------- | ------------ |
| Off        | [設定不可]   |
| Low        | しずか       |
| Medium     | 風量3        |
| High       | 風量5        |
| Auto       | 自動         |

| Matterパーセント | エアコン風量 |
| ---------------- | ------------ |
| 0                | 自動         |
| 1～10            | しずか       |
| 11～20           | 風量1        |
| 21～30           | 風量2        |
| 31～40           | 風量3        |
| 41～50           | 風量4        |
| 51～100          | 風量5        |

`fanSpeed` モードセレクトクラスターでも風量は設定可能

- ファン1: 設定湿度

| Matter風量 | エアコン設定湿度(冷房/除湿) | エアコン設定湿度(暖房/加湿) | エアコン設定湿度(自動) |
| ---------- | --------------------------- | --------------------------- | ---------------------- |
| Off        | OFF                         | OFF                         | OFF                    |
| Low        | 50%                         | 40%                         | 低め                   |
| Medium     | 55%                         | 45%                         | 標準                   |
| High       | 60%                         | 50%                         | 高め                   |
| Auto       | 連続                        | 連続                        | [設定不可]             |

Matterパーセントは無視

- ファン2: 換気設定

| Matter風量 | エアコン換気設定 |
| ---------- | ---------------- |
| Off        | OFF              |
| Low        | 自動             |
| Medium     | 自動             |
| High       | 強               |
| Auto       | 自動             |

Matterパーセントは無視

- 風向上下

`fanUpDownDirection` モードセレクトクラスターでのみ設定可能

- 風向左右

`fanRightLeftDirection` モードセレクトクラスターでのみ設定可能

- 温度センサー1: 外気温センサー

### ACK70Z

- 空気清浄機 ファンコントロール: 風量

| Matter風量 | 空気清浄機コース/風量 |
| ---------- | --------------------- |
| Off        | しずか                |
| Low        | 弱                    |
| Medium     | 標準                  |
| High       | ターボ                |
| Auto       | 風量自動              |

| Matterパーセント | 空気清浄機コース/風量 |
| ---------------- | --------------------- |
| 0                | しずか                |
| 1～33            | 弱                    |
| 34～66           | 標準                  |
| 67～100          | ターボ                |

`fanSpeed` モードセレクトクラスターでも風量は設定可能

- ファン1: 加湿

| Matter風量 | 空気清浄機加湿     |
| ---------- | ------------------ |
| Off        | OFF                |
| Low        | ひかえめ           |
| Medium     | 標準               |
| High       | 高め               |
| Auto       | 自動(手動設定不可) |

| Matterパーセント | 空気清浄機加湿 |
| ---------------- | -------------- |
| 0                | OFF            |
| 1～33            | ひかえめ       |
| 34～66           | 標準           |
| 67～100          | 高め           |

コースによって加湿が自動に設定されている場合は手動での切り替えは不可なので注意

- 水漏れセンサー: 水タンク

| Matter     | 空気清浄機水タンク |
| ---------- | ------------------ |
| 水漏れなし | 空ではない         |
| 水漏れあり | 空                 |

加湿を使用していない場合は水タンクが空でも空ではないと常に判定されるので注意

- 空気質センサー1: ホコリセンサー
- 空気質センサー2: PM2.5センサー
- 空気質センサー3: ニオイセンサー
